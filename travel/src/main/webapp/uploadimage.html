<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>上传房源</title>
    <link rel="stylesheet" type="text/css" href="css/common.css">
    <link rel="stylesheet" href="css/house_upload.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!--<link rel="stylesheet" href="css/layui.css" media="all">-->
    <script src="js/bootstrap.js"></script>

    <!--<script src="js/bootstrap.min.js"></script>-->
    <!--<script src="twitter-bootstrap-wizard-master/bootstrap/js/bootstrap.js"></script>-->
    <script src="js/jquery-3.3.1.js"></script>
    <script type="text/javascript" src="js/include.js"></script>
    <style>

        .float{
            float:left;
            width : 120px;
            height: 120px;
            overflow: hidden;
            border: 1px solid #CCCCCC;
            border-radius: 10px;
            padding: 5px;
            margin: 5px;
        }
        .float img,span{
            vertical-align: middle;
            display: inline-block;
            *display: inline;
            *zoom: 1;
        }
        .float span{
            height: 100%;
        }
        img{
            position: relative;
            width: 100%;
            align-items: center;

        }
        .fileinput-button {
            position: relative;
            display: inline-block;
            overflow: hidden;
        }

        .fileinput-button input{
            position: absolute;
            left: 0px;
            top: 0px;
            opacity: 0;
            -ms-filter: 'alpha(opacity=0)';
        }



    </style>



    <script>


        $(document).ready(function(){


            //为外面的盒子绑定一个点击事件
            $("#uploadImgBtn2").click(function(){
                /*
                1、先获取input标签
                2、给input标签绑定change事件
                3、把图片回显
                 */
//            1、先回去input标签
                var $input = $("#images");
                console.log($input)
//            2、给input标签绑定change事件
                $input.on("change" , function(){
                    console.log(this)
                    //补充说明：因为我们给input标签设置multiple属性，因此一次可以上传多个文件
                    //获取选择图片的个数
                    var files = this.files;
                    var length = files.length;
                    console.log("选择了"+length+"张图片");
                    //3、回显
                    $.each(files,function(key,value){
                        //每次都只会遍历一个图片数据
                        var div = document.createElement("div"),
                            span = document.createElement("span"),
                            img = document.createElement("img");
                        div.className = "float";

                        var fr = new FileReader();
                        fr.onload = function(){
                            img.src=this.result;
                            div.appendChild(span);
                            div.appendChild(img);
                            // document.body.appendChild(div);
                            document.getElementById("registerForm").appendChild(div);
                        };
                        fr.readAsDataURL(value);
                    })

                })


            })


            //为外面的盒子绑定一个点击事件
            $("#uploadImgBtn").click(function(){
                /*
                1、先获取input标签
                2、给input标签绑定change事件
                3、把图片回显
                 */
//            1、先回去input标签
                var $input = $("#himage");
                console.log($input)
//            2、给input标签绑定change事件
                $input.on("change" , function(){
                    console.log(this)
                    //补充说明：因为我们给input标签设置multiple属性，因此一次可以上传多个文件
                    //获取选择图片的个数
                    var files = this.files;
                    var length = files.length;
                    console.log("选择了"+length+"张图片");
                    //3、回显
                    $.each(files,function(key,value){
                        //每次都只会遍历一个图片数据
                        var div = document.createElement("div"),
                            span = document.createElement("span"),
                            img = document.createElement("img");
                        div.className = "float";

                        var fr = new FileReader();
                        fr.onload = function(){
                            img.src=this.result;
                            div.appendChild(span);
                            div.appendChild(img);
                            // document.body.appendChild(div);
                            document.getElementById("registerForm").appendChild(div);
                        };
                        fr.readAsDataURL(value);
                    })

                })


            })

        });

        function filename() {
            var hname = getParameter("hname");
            return hname;
        }

    </script>
    <script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>




        </head>
<body>

<div id="header"></div>
<div class="rg_layout">
    <div class="rg_form clearfix">
        <div class="rg_form_left">
            <p>上传图片</p>

        </div>

        <div class="rg_form_center">
            <div id="errorMsg" style="color:red;text-align: center"></div>

            <form id="registerForm" action="house/uploadImage" method="post" enctype="multipart/form-data" >
                <!--提交处理请求的标识符-->
                <!--<input type="hidden" name="action" value="register">-->


                <table style="margin-top: 25px;">

                    <tr>
                        <td class="td_left">
                            <!--<label for="file"></label>-->
                        </td>
                        <td class="td_right gender">


                            <div class="uploadImgBtn" id="uploadImgBtn">

                                <span class="btn btn-success fileinput-button">
                                    <span>选择封面图片</span>
                                    <input type="file" id="himage"  name="himage" class="uploadImg" />
                                </span>


                            </div>
                            <div class="uploadImgBtn" id="uploadImgBtn2" style="margin-top: 10px">
                                <span class="btn btn-success fileinput-button">
                                    <span>选择房屋图片</span>
                                    <input type="file" id="images"  name="images" class="uploadImg" multiple />
                                </span>
                            </div>
                        </td>
                    </tr>




                    <tr style="position: absolute; bottom: 70px " >
                        <td class="td_left">
                        </td>
                        <td class="td_right check">
                            <input type="submit" class="submit" value="提交" href="load_ok.html">
                            <span id="msg" style="color: red;"></span>
                        </td>
                    </tr>
                </table>
            </form>
        </div>
        <div class="rg_form_right">

        </div>
    </div>
</div>
<div id="footer"></div>


</body>
</html>